<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Time Zone Converter</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #fff;
    margin: 0;
    padding: 20px;
  }
  .container {
    border: 4px solid orange;
    padding: 20px;
    max-width: 1000px;
    margin: auto;
  }
  h2 {
    margin: 0 0 10px;
  }
  .green {
    color: green;
    font-weight: bold;
  }
  .row {
    display: flex;
    justify-content: space-between;
    gap: 20px;
  }
  .panel {
    flex: 1;
    border: 2px solid #007BFF;
    padding: 10px;
    box-sizing: border-box;
  }
  label {
    font-weight: bold;
    display: block;
    margin-bottom: 5px;
  }
  select, input[type="text"] {
    width: 100%;
    padding: 6px;
    margin-bottom: 10px;
    font-size: 14px;
  }
  .slider-container {
    position: relative;
    height: 60px;
  }
  input[type="range"] {
    width: 100%;
    margin: 20px 0;
  }
  .ticks {
    display: flex;
    justify-content: space-between;
    margin-top: -15px;
    font-size: 12px;
    font-weight: bold;
    position: relative;
  }
  .ticks span {
    width: 0;
    position: relative;
  }
  .ticks span:first-child {
    transform: translateX(-8px);
  }
  .ticks span:nth-child(2) {
    transform: translateX(0px);
  }
  .ticks span:last-child {
    transform: translateX(8px);
  }
  .info {
    margin-top: 10px;
    font-size: 14px;
  }
  .bold {
    font-weight: bold;
  }
</style>
</head>
<body>

<div class="container">
  <div class="row">
    <div class="panel">
      <label class="green">Rep’s Timezone</label>
      <select id="rep-timezone">
        <option value="America/Los_Angeles">Pacific</option>
        <option value="America/Denver">Mountain</option>
        <option value="America/Chicago" selected>Central</option>
        <option value="America/New_York">Eastern</option>
      </select>
      <div class="slider-container">
        <input type="range" id="rep-slider" min="0" max="1440" step="15" value="720" />
        <div class="ticks">
          <span>6 AM</span>
          <span>12 PM</span>
          <span>6 PM</span>
        </div>
      </div>
      <div id="rep-time-display" class="bold"></div>
    </div>

    <div class="panel">
      <label class="green">Prospect’s Timezone</label>
      <input type="text" id="prospect-country" placeholder="Input Country" list="country-list" />
      <datalist id="country-list"></datalist>
      <select id="prospect-timezone" style="display:none"></select>
      <div class="slider-container">
        <input type="range" id="prospect-slider" min="0" max="1440" step="15" value="720" />
        <div class="ticks">
          <span>6 AM</span>
          <span>12 PM</span>
          <span>6 PM</span>
        </div>
      </div>
      <div id="prospect-time-display" class="bold"></div>
      <button id="toggle-military">Toggle Military Time</button>
    </div>
  </div>

  <div class="info">
    <div id="current-difference" class="bold"></div>
    <div id="overlap" class="bold"></div>
  </div>
</div>

<script>
  const repTZ = document.getElementById("rep-timezone");
  const repSlider = document.getElementById("rep-slider");
  const repTimeDisplay = document.getElementById("rep-time-display");

  const prospectCountry = document.getElementById("prospect-country");
  const prospectTZ = document.getElementById("prospect-timezone");
  const prospectSlider = document.getElementById("prospect-slider");
  const prospectTimeDisplay = document.getElementById("prospect-time-display");

  const currentDiff = document.getElementById("current-difference");
  const overlap = document.getElementById("overlap");
  const toggleMilitary = document.getElementById("toggle-military");

  let military = false;
  const countries = {
    "United States": ["America/New_York","America/Chicago","America/Denver","America/Los_Angeles"],
    "Canada": ["America/Toronto","America/Vancouver","America/Edmonton","America/Halifax"],
    "Germany": ["Europe/Berlin"],
    "Romania": ["Europe/Bucharest"],
    "China": ["Asia/Shanghai"],
    "United Kingdom": ["Europe/London"],
    "Italy": ["Europe/Rome"],
    "Australia": ["Australia/Sydney","Australia/Perth"]
  };

  const datalist = document.getElementById("country-list");
  for (let c in countries) {
    let opt = document.createElement("option");
    opt.value = c;
    datalist.appendChild(opt);
  }

  prospectCountry.addEventListener("change", () => {
    const val = prospectCountry.value;
    prospectTZ.innerHTML = "";
    if (countries[val]) {
      countries[val].forEach(tz => {
        let opt = document.createElement("option");
        opt.value = tz;
        opt.textContent = tz;
        prospectTZ.appendChild(opt);
      });
      prospectTZ.style.display = "block";
    } else {
      prospectTZ.style.display = "none";
    }
    updateTimes();
  });

  function formatTime(minutes, tz, military) {
    let dt = new Date();
    dt.setUTCHours(0, minutes);
    let opts = military ? {hour: "2-digit", minute: "2-digit", hour12: false, timeZone: tz}
                        : {hour: "numeric", minute: "2-digit", hour12: true, timeZone: tz};
    return new Intl.DateTimeFormat("en-US", opts).format(dt);
  }

  function updateTimes() {
    const repMinutes = parseInt(repSlider.value);
    const pTZ = prospectTZ.value || Object.values(countries)[0][0];
    repTimeDisplay.textContent = formatTime(repMinutes, repTZ.value, false);
    prospectTimeDisplay.textContent = formatTime(repMinutes, pTZ, military);

    // difference
    let now = new Date();
    let repOffset = new Date(now.toLocaleString("en-US", {timeZone: repTZ.value})).getTime() - now.getTime();
    let pOffset = new Date(now.toLocaleString("en-US", {timeZone: pTZ})).getTime() - now.getTime();
    let diffHrs = Math.round((pOffset - repOffset) / 3600000);
    currentDiff.textContent = `(Selected Timezone) is ${diffHrs} hours ${diffHrs >= 0 ? "ahead" : "behind"} ${repTZ.options[repTZ.selectedIndex].text}`;

    // overlap
    let repStart = 9 * 60;
    let repEnd = 17 * 60;
    let prospectStart = repStart - diffHrs * 60;
    let prospectEnd = repEnd - diffHrs * 60;
    overlap.innerHTML = `<span class="green">Overlapping business hours:</span> ${formatTime(repStart, repTZ.value, false)}–${formatTime(repEnd, repTZ.value, false)} ↔ ${formatTime(prospectStart, pTZ, military)}–${formatTime(prospectEnd, pTZ, military)}`;
  }

  repSlider.addEventListener("input", e => {
    prospectSlider.value = e.target.value;
    updateTimes();
  });
  prospectSlider.addEventListener("input", e => {
    repSlider.value = e.target.value;
    updateTimes();
  });
  repTZ.addEventListener("change", updateTimes);
  prospectTZ.addEventListener("change", updateTimes);
  toggleMilitary.addEventListener("click", () => {
    military = !military;
    updateTimes();
  });

  updateTimes();
</script>
</body>
</html>
