<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Time Zone Converter</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #fff;
        margin: 20px;
        display: flex;
        justify-content: center;
    }
    .container {
        display: flex;
        gap: 20px;
        border: 3px solid orange;
        border-radius: 10px;
        padding: 20px;
    }
    .timezone-box {
        border: 2px solid #1E90FF;
        border-radius: 8px;
        padding: 15px;
        flex: 1;
    }
    .timezone-title {
        font-weight: bold;
        font-size: 1.2em;
        margin-bottom: 8px;
    }
    select, input {
        width: 100%;
        padding: 8px;
        font-size: 1em;
        margin-bottom: 12px;
    }
    .slider {
        width: 100%;
        margin: 10px 0;
    }
    .time-labels {
        display: flex;
        justify-content: space-between;
        font-size: 0.9em;
        color: #555;
        margin-top: -5px;
    }
    .time-display {
        font-size: 1.5em;
        font-weight: bold;
    }
    .info-section {
        margin-top: 15px;
        font-size: 1em;
    }
    .highlight-green {
        color: green;
        font-weight: bold;
    }
    .arrow-green {
        font-weight: bold;
        color: green;
    }
    button {
        padding: 6px 12px;
        font-size: 0.9em;
        border: 1px solid #ccc;
        border-radius: 5px;
        cursor: pointer;
    }
</style>
</head>
<body>

<div class="container">
    <!-- Rep's Timezone -->
    <div class="timezone-box">
        <div class="timezone-title">Rep’s Timezone</div>
        <select id="rep-timezone"></select>
        <div class="time-display" id="rep-time">7:00 AM</div>
        <input type="range" min="0" max="1439" value="420" class="slider" id="rep-slider">
        <div class="time-labels">
            <span>6 AM</span><span>12 PM</span><span>6 PM</span>
        </div>
    </div>

    <!-- Prospect's Timezone -->
    <div class="timezone-box">
        <div class="timezone-title">Prospect’s Timezone</div>
        <select id="prospect-country">
            <option value="">Input Country</option>
        </select>
        <select id="prospect-timezone" style="display:none;"></select>
        <div class="time-display" id="prospect-time">8:00 AM</div>
        <input type="range" min="0" max="1439" value="480" class="slider" id="prospect-slider">
        <div class="time-labels">
            <span>6 AM</span><span>12 PM</span><span>6 PM</span>
        </div>
        <button id="toggle-military">Toggle Military Time</button>
    </div>
</div>

<!-- Info section -->
<div class="info-section" id="time-difference"></div>
<div class="info-section" id="overlap-hours"></div>

<script>
    const repSelect = document.getElementById("rep-timezone");
    const prospectCountrySelect = document.getElementById("prospect-country");
    const prospectTimezoneSelect = document.getElementById("prospect-timezone");
    const repSlider = document.getElementById("rep-slider");
    const prospectSlider = document.getElementById("prospect-slider");
    const repTimeDisplay = document.getElementById("rep-time");
    const prospectTimeDisplay = document.getElementById("prospect-time");
    const timeDifference = document.getElementById("time-difference");
    const overlapHours = document.getElementById("overlap-hours");
    const toggleMilitaryBtn = document.getElementById("toggle-military");

    let militaryTime = false;

    const timezones = {
        "Central": "America/Chicago",
        "Eastern": "America/New_York",
        "Pacific": "America/Los_Angeles",
        "Mountain": "America/Denver"
    };

    const countries = {
        "Germany": ["Europe/Berlin"],
        "United Kingdom": ["Europe/London"],
        "Canada": ["America/Toronto", "America/Winnipeg", "America/Vancouver"],
        "China": ["Asia/Shanghai"]
    };

    // Populate rep timezone dropdown
    Object.keys(timezones).forEach(tz => {
        const opt = document.createElement("option");
        opt.value = timezones[tz];
        opt.textContent = tz;
        repSelect.appendChild(opt);
    });

    // Populate countries
    Object.keys(countries).forEach(country => {
        const opt = document.createElement("option");
        opt.value = country;
        opt.textContent = country;
        prospectCountrySelect.appendChild(opt);
    });

    prospectCountrySelect.addEventListener("change", () => {
        const selectedCountry = prospectCountrySelect.value;
        prospectTimezoneSelect.innerHTML = "";
        if (countries[selectedCountry].length > 1) {
            countries[selectedCountry].forEach(tz => {
                const opt = document.createElement("option");
                opt.value = tz;
                opt.textContent = tz;
                prospectTimezoneSelect.appendChild(opt);
            });
            prospectTimezoneSelect.style.display = "block";
        } else {
            prospectTimezoneSelect.style.display = "none";
        }
        updateTimes();
    });

    function updateTimes() {
        const repTZ = repSelect.value;
        const prospectTZ = prospectTimezoneSelect.value || (prospectCountrySelect.value && countries[prospectCountrySelect.value][0]);
        if (!repTZ || !prospectTZ) return;

        const now = new Date();
        const repTime = new Date(now.toLocaleString("en-US", { timeZone: repTZ }));
        repTime.setHours(0, repSlider.value);
        const prospectTime = new Date(repTime.toLocaleString("en-US", { timeZone: prospectTZ }));

        repTimeDisplay.textContent = formatTime(repTime, false);
        prospectTimeDisplay.textContent = formatTime(prospectTime, militaryTime);

        const diff = (prospectTime.getTime() - repTime.getTime()) / 3600000;
        const diffHours = diff >= 0 ? diff : diff + 24;
        const relation = diffHours > 12 ? 24 - diffHours : diffHours;
        const aheadBehind = diffHours <= 12 ? "ahead" : "behind";
        timeDifference.innerHTML = `<b>${prospectCountrySelect.value || "Selected Timezone"}</b> is <span class="highlight-green">${relation} hours ${aheadBehind}</span> <b>${repSelect.options[repSelect.selectedIndex].text}</b>`;

        // Overlapping business hours
        const repStart = 9, repEnd = 17;
        let prospectStart = (repStart + relation) % 24;
        let prospectEnd = (repEnd + relation) % 24;

        overlapHours.innerHTML = `Overlapping business hours: ${formatHour(repStart)}–${formatHour(repEnd)} <span class="arrow-green">↔</span> ${formatHour(prospectStart)}–${formatHour(prospectEnd)}`;
    }

    function formatTime(date, military) {
        if (military) {
            return date.toLocaleTimeString("en-GB", { hour: "2-digit", minute: "2-digit", hour12: false });
        }
        return date.toLocaleTimeString("en-US", { hour: "numeric", minute: "2-digit", hour12: true });
    }

    function formatHour(hour) {
        const h = Math.floor(hour);
        const m = Math.round((hour - h) * 60);
        const date = new Date();
        date.setHours(h, m);
        return formatTime(date, militaryTime);
    }

    repSlider.addEventListener("input", updateTimes);
    prospectSlider.addEventListener("input", updateTimes);
    repSelect.addEventListener("change", updateTimes);
    prospectTimezoneSelect.addEventListener("change", updateTimes);
    toggleMilitaryBtn.addEventListener("click", () => {
        militaryTime = !militaryTime;
        updateTimes();
    });

    updateTimes();
</script>
</body>
</html>

